import{U as z,I as ee,aa as J,o as b,D as q,G as ne,w as ae,g as U,K as re,M as fe,O as Y,P,z as k,C as ie,ab as se,ac as X,n as le,ad as A,V,ae as te,X as ue,af as oe,ag as de,ah as G,ai as ce,aj as ve,ak as pe,a2 as K,al as he,Q as W,T as Z,am as B,q as _e,an as ge,ao as Ee,ap as me,R as Ae,A as Te}from"./CL2eiML2.js";function Ne(e,r){return r}function Ie(e,r,l){for(var c=[],v=r.length,u,t=r.length,i=0;i<v;i++){let p=r[i];Z(p,()=>{if(u){if(u.pending.delete(p),u.done.add(p),u.pending.size===0){var d=e.outrogroups;y(G(u.done)),d.delete(u),d.size===0&&(e.outrogroups=null)}}else t-=1},!1)}if(t===0){var f=c.length===0&&l!==null;if(f){var o=l,n=o.parentNode;me(n),n.append(o),e.items.clear()}y(r,!f)}else u={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(u)}function y(e,r=!0){for(var l=0;l<e.length;l++)Ae(e[l],r)}var Q;function Le(e,r,l,c,v,u=null){var t=e,i=new Map,f=(r&J)!==0;if(f){var o=e;t=b?q(ne(o)):o.appendChild(z())}b&&ae();var n=null,p=oe(()=>{var s=l();return de(s)?s:s==null?[]:G(s)}),d,h=!0;function I(){a.fallback=n,we(a,d,t,r,c),n!==null&&(d.length===0?(n.f&A)===0?W(n):(n.f^=A,M(n,null,t)):Z(n,()=>{n=null}))}var S=ee(()=>{d=U(p);var s=d.length;let R=!1;if(b){var C=re(t)===fe;C!==(s===0)&&(t=Y(),q(t),P(!1),R=!0)}for(var m=new Set,w=le,N=ue(),g=0;g<s;g+=1){b&&k.nodeType===ie&&k.data===se&&(t=k,R=!0,P(!1));var x=d[g],L=c(x,g),_=h?null:i.get(L);_?(_.v&&X(_.v,x),_.i&&X(_.i,g),N&&w.unskip_effect(_.e)):(_=xe(i,h?t:Q??=z(),x,L,g,v,r,l),h||(_.e.f|=A),i.set(L,_)),m.add(L)}if(s===0&&u&&!n&&(h?n=V(()=>u(t)):(n=V(()=>u(Q??=z())),n.f|=A)),s>m.size&&te(),b&&s>0&&q(Y()),!h)if(N){for(const[$,j]of i)m.has($)||w.skip_effect(j.e);w.oncommit(I),w.ondiscard(()=>{})}else I();R&&P(!0),U(p)}),a={effect:S,items:i,outrogroups:null,fallback:n};h=!1,b&&(t=k)}function D(e){for(;e!==null&&(e.f&ge)===0;)e=e.next;return e}function we(e,r,l,c,v){var u=(c&Ee)!==0,t=r.length,i=e.items,f=D(e.effect.first),o,n=null,p,d=[],h=[],I,S,a,s;if(u)for(s=0;s<t;s+=1)I=r[s],S=v(I,s),a=i.get(S).e,(a.f&A)===0&&(a.nodes?.a?.measure(),(p??=new Set).add(a));for(s=0;s<t;s+=1){if(I=r[s],S=v(I,s),a=i.get(S).e,e.outrogroups!==null)for(const _ of e.outrogroups)_.pending.delete(a),_.done.delete(a);if((a.f&A)!==0)if(a.f^=A,a===f)M(a,null,l);else{var R=n?n.next:f;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),T(e,n,a),T(e,a,R),M(a,R,l),n=a,d=[],h=[],f=D(n.next);continue}if((a.f&B)!==0&&(W(a),u&&(a.nodes?.a?.unfix(),(p??=new Set).delete(a))),a!==f){if(o!==void 0&&o.has(a)){if(d.length<h.length){var C=h[0],m;n=C.prev;var w=d[0],N=d[d.length-1];for(m=0;m<d.length;m+=1)M(d[m],C,l);for(m=0;m<h.length;m+=1)o.delete(h[m]);T(e,w.prev,N.next),T(e,n,w),T(e,N,C),f=C,n=N,s-=1,d=[],h=[]}else o.delete(a),M(a,f,l),T(e,a.prev,a.next),T(e,a,n===null?e.effect.first:n.next),T(e,n,a),n=a;continue}for(d=[],h=[];f!==null&&f!==a;)(o??=new Set).add(f),h.push(f),f=D(f.next);if(f===null)continue}(a.f&A)===0&&d.push(a),n=a,f=D(a.next)}if(e.outrogroups!==null){for(const _ of e.outrogroups)_.pending.size===0&&(y(G(_.done)),e.outrogroups?.delete(_));e.outrogroups.size===0&&(e.outrogroups=null)}if(f!==null||o!==void 0){var g=[];if(o!==void 0)for(a of o)(a.f&B)===0&&g.push(a);for(;f!==null;)(f.f&B)===0&&f!==e.fallback&&g.push(f),f=D(f.next);var x=g.length;if(x>0){var L=(c&J)!==0&&t===0?l:null;if(u){for(s=0;s<x;s+=1)g[s].nodes?.a?.measure();for(s=0;s<x;s+=1)g[s].nodes?.a?.fix()}Ie(e,g,L)}}u&&_e(()=>{if(p!==void 0)for(a of p)a.nodes?.a?.apply()})}function xe(e,r,l,c,v,u,t,i){var f=(t&ce)!==0?(t&ve)===0?pe(l,!1,!1):K(l):null,o=(t&he)!==0?K(v):null;return{v:f,i:o,e:V(()=>(u(r,f??l,o??v,i),()=>{e.delete(c)}))}}function M(e,r,l){if(e.nodes)for(var c=e.nodes.start,v=e.nodes.end,u=r&&(r.f&A)===0?r.nodes.start:l;c!==null;){var t=Te(c);if(u.before(c),c===v)return;c=t}}function T(e,r,l){r===null?e.effect.first=l:r.next=l,l===null?e.effect.last=r:l.prev=r}let F=[],H=[];function Se(e){F=F.filter(r=>r!==e)}function be(e){return F.push(e),()=>Se(e)}function Re(e){H=H.filter(r=>r!==e)}function De(e){return H.push(e),()=>Re(e)}function E(e){F.forEach(r=>r(e))}function O(e){H.forEach(r=>r(e))}function Me(){window.addEventListener("keydown",i=>{});const e=400,r=100,l=new Set([12,13,14,15]);let c={},v={};function u(i){i==8&&E("cancel"),i==1&&E("confirm"),i==2&&E("special"),i==3&&E("delete"),i==4&&E("l1"),i==5&&E("r1"),i==6&&E("l2"),i==7&&E("r2"),i==10&&E("l3"),i==12&&E("up"),i==13&&E("down"),i==14&&E("left"),i==15&&E("right")}let t=()=>{var i=navigator.getGamepads();for(let f of i)f?.buttons&&(f.axes.forEach((o,n)=>{n==0&&O({axis:"lx",value:o}),n==1&&O({axis:"ly",value:o}),n==2&&O({axis:"rx",value:o}),n==3&&O({axis:"ry",value:o})}),f.buttons.forEach((o,n)=>{if(o.pressed){const p=performance.now();if(!c[n])console.log("Pressed: "+n),u(n),c[n]=!0,l.has(n)&&(v[n]={pressedAt:p,lastRepeatAt:p});else if(l.has(n)&&v[n]){const{pressedAt:d,lastRepeatAt:h}=v[n];p-d>=e&&p-h>=r&&(u(n),v[n].lastRepeatAt=p)}}else c[n]=!1,delete v[n]}));requestAnimationFrame(t)};requestAnimationFrame(t)}export{be as a,De as b,Me as c,Le as e,Ne as i};
