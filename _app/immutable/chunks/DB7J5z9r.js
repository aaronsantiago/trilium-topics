let c=[],d=[],p=[];function x(t){c=c.filter(s=>s!==t)}function T(t){return c.push(t),()=>x(t)}function w(t){d=d.filter(s=>s!==t)}function _(t){return d.push(t),()=>w(t)}function g(t){p=p.filter(s=>s!==t)}function S(t){return p.push(t),()=>g(t)}function f(t){c.forEach(s=>s(t))}function a(t){d.forEach(s=>s(t))}function u(t){p.forEach(s=>s(t))}let v=!1;function y(){if(v)return;v=!0,window.addEventListener("keydown",e=>{});const t=400,s=100,m=new Set([12,13,14,15]);let i={},l={};function A(e){e==8&&f("cancel"),e==1&&f("confirm"),e==2&&f("special"),e==3&&f("delete"),e==4&&f("l1"),e==5&&f("r1"),e==6&&f("l2"),e==7&&f("r2"),e==9&&f("menu"),e==10&&f("l3"),e==12&&f("up"),e==13&&f("down"),e==14&&f("left"),e==15&&f("right")}function I(e){e==8&&a("cancel"),e==1&&a("confirm"),e==2&&a("special"),e==3&&a("delete"),e==4&&a("l1"),e==5&&a("r1"),e==6&&a("l2"),e==7&&a("r2"),e==9&&a("menu"),e==10&&a("l3"),e==12&&a("up"),e==13&&a("down"),e==14&&a("left"),e==15&&a("right")}let E=()=>{var e=navigator.getGamepads();for(let h of e)h?.buttons&&(h.axes.forEach((r,n)=>{n==0&&u({axis:"lx",value:r}),n==1&&u({axis:"ly",value:r}),n==2&&u({axis:"rx",value:r}),n==3&&u({axis:"ry",value:r})}),h.buttons.forEach((r,n)=>{if(r.pressed){const o=performance.now();if(!i[n])console.log("Pressed: "+n),A(n),i[n]=!0,m.has(n)&&(l[n]={pressedAt:o,lastRepeatAt:o});else if(m.has(n)&&l[n]){const{pressedAt:L,lastRepeatAt:R}=l[n];o-L>=t&&o-R>=s&&(A(n),l[n].lastRepeatAt=o)}}else i[n]&&I(n),i[n]=!1,delete l[n]}));requestAnimationFrame(E)};requestAnimationFrame(E)}export{T as a,_ as b,S as c,y as i};
