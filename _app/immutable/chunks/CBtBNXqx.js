import{c as _,r as y,d as v,p as w,a as b,b as k,h as E,f as P,m as S,s as M}from"./DffANUGd.js";class L{anchor;#t=new Map;#s=new Map;#e=new Map;#r=new Set;#n=!0;constructor(e,s=!0){this.anchor=e,this.#n=s}#i=()=>{var e=_;if(this.#t.has(e)){var s=this.#t.get(e),r=this.#s.get(s);if(r)y(r),this.#r.delete(s);else{var o=this.#e.get(s);o&&(this.#s.set(s,o.effect),this.#e.delete(s),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[i,n]of this.#t){if(this.#t.delete(i),i===e)break;const t=this.#e.get(n);t&&(v(t.effect),this.#e.delete(n))}for(const[i,n]of this.#s){if(i===s||this.#r.has(i))continue;const t=()=>{if(Array.from(this.#t.values()).includes(i)){var l=document.createDocumentFragment();S(n,l),l.append(b()),this.#e.set(i,{effect:n,fragment:l})}else v(n);this.#r.delete(i),this.#s.delete(i)};this.#n||!r?(this.#r.add(i),w(n,t,!1)):t()}}};#o=e=>{this.#t.delete(e);const s=Array.from(this.#t.values());for(const[r,o]of this.#e)s.includes(r)||(v(o.effect),this.#e.delete(r))};ensure(e,s){var r=_,o=M();if(s&&!this.#s.has(e)&&!this.#e.has(e))if(o){var i=document.createDocumentFragment(),n=b();i.append(n),this.#e.set(e,{effect:k(()=>s(n)),fragment:i})}else this.#s.set(e,k(()=>s(this.anchor)));if(this.#t.set(r,e),o){for(const[t,a]of this.#s)t===e?r.unskip_effect(a):r.skip_effect(a);for(const[t,a]of this.#e)t===e?r.unskip_effect(a.effect):r.skip_effect(a.effect);r.oncommit(this.#i),r.ondiscard(this.#o)}else E&&(this.anchor=P),this.#i()}}const $="modulepreload",A=function(p,e){return new URL(p,e).href},g={},B=function(e,s,r){let o=Promise.resolve();if(s&&s.length>0){let l=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};const n=document.getElementsByTagName("link"),t=document.querySelector("meta[property=csp-nonce]"),a=t?.nonce||t?.getAttribute("nonce");o=l(s.map(c=>{if(c=A(c,r),c in g)return;g[c]=!0;const h=c.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(r)for(let d=n.length-1;d>=0;d--){const m=n[d];if(m.href===c&&(!h||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":$,h||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),h)return new Promise((d,m)=>{f.addEventListener("load",d),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(n){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=n,window.dispatchEvent(t),!t.defaultPrevented)throw n}return o.then(n=>{for(const t of n||[])t.status==="rejected"&&i(t.reason);return e().catch(i)})};export{L as B,B as _};
