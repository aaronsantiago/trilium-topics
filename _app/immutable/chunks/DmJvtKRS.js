var m={},z;function rt(){if(z)return m;z=1,m.__esModule=!0,m.getNextFocus=void 0;function F(n,t){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=H(n))||t){r&&(n=r);var e=0,o=function(){};return{s:o,n:function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}},e:function(v){throw v},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,u=!1,a;return{s:function(){r=r.call(n)},n:function(){var v=r.next();return l=v.done,v},e:function(v){u=!0,a=v},f:function(){try{!l&&r.return!=null&&r.return()}finally{if(u)throw a}}}}function H(n,t){if(n){if(typeof n=="string")return k(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(n,t)}}function k(n,t){(t==null||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}var O="[tabindex], a, input, button",N="nav, section, .lrud-container",R="[data-lrud-consider-container-distance]",I=".lrud-ignore, [disabled]",g=function(t,r){var e=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(o){for(var l=(this.document||this.ownerDocument).querySelectorAll(o),u=l.length;--u>=0&&l.item(u)!==this;);return u>-1};return e.call(t,r)},b=function(t){return Array.prototype.slice.call(t)},A=function n(t){return!t.parentElement||t.parentElement.tagName==="BODY"?null:g(t.parentElement,N)?t.parentElement:n(t.parentElement)},w=function(t){if(!t)return[];var r=b(t.querySelectorAll(I));return b(t.querySelectorAll(O)).filter(function(e){return!r.some(function(o){return o==e||o.contains(e)})}).filter(function(e){return parseInt(e.getAttribute("tabindex")||"0",10)>-1})},V=function(t){var r=b(t.querySelectorAll(I));return[].concat(b(t.querySelectorAll(R)).filter(function(e){return!r.some(function(o){return o==e||o.contains(e)})}).filter(function(e){var o;return((o=w(e))===null||o===void 0?void 0:o.length)>0}),w(t))},j=function(t){if(!t)return[];for(var r=[t],e=t;e;)e=A(e),e&&r.push(e);return r},Y=function(t,r){switch(r){case"left":return{x:t.left,y:(t.top+t.bottom)/2};case"right":return{x:t.right,y:(t.top+t.bottom)/2};case"up":return{x:(t.left+t.right)/2,y:t.top};case"down":return{x:(t.left+t.right)/2,y:t.bottom}}},$=function(t,r,e){if(r==="left"||r==="right"){var o=r==="left"?e.right:e.left;return t.y<e.top?{x:o,y:e.top}:t.y>e.bottom?{x:o,y:e.bottom}:{x:o,y:t.y}}else if(r==="up"||r==="down"){var l=r==="up"?e.bottom:e.top;return t.x<e.left?{x:e.left,y:l}:t.x>e.right?{x:e.right,y:l}:{x:t.x,y:l}}},G=function(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))},L=function(t,r){return t.y>r.y},T=function(t,r){return t.x>r.x},J=function(t,r){for(var e=j(t),o=j(r),l=0;l<o.length;l++){var u=o[l],a=e.indexOf(u);if(a>-1){e.splice(a);break}}return e.reduce(function(f,v){var x=(v?.getAttribute("data-block-exit")||"").split(" ");return f.concat(x)},[])},K=function(t,r,e,o){if(t.width===0&&t.height===0)return!1;!o&&o!=0&&(o=.3);var l={x:t.left+t.width*(r==="left"?1-o:r==="right"?o:.5),y:t.top+t.height*(r==="up"?1-o:r==="down"?o:.5)};return!!(r==="left"&&T(e,l)||r==="right"&&T(l,e)||r==="up"&&L(e,l)||r==="down"&&L(l,e))},P=function(t,r,e){var o=r.getBoundingClientRect(),l=Y(o,e);return t.filter(function(u){var a=u.getBoundingClientRect(),f=parseFloat(u.getAttribute("data-lrud-overlap-threshold"));return K(a,e,l,f)}).map(function(u){var a=u.getBoundingClientRect(),f=$(l,e,a),v=G(l,f);return{candidate:u,distance:v}}).sort(function(u,a){return u.distance-a.distance}).map(function(u){var a=u.candidate;return a})},S=function(t){if(!t)return null;do t=A(t);while(t&&!g(t,R));return t};m.getNextFocus=function(t,r,e){var o;if((!e||!e.querySelector)&&(e=document.body),!t)return(o=w(e))===null||o===void 0?void 0:o[0];var l=Q[r],u=A(t);if(u&&g(t,O)){var a;u.setAttribute("data-focus",t.id),(a=S(u))===null||a===void 0||a.setAttribute("data-focus",t.id)}var f=[];if(u?.getAttribute("data-lrud-prioritise-children")!=="false"&&e.contains(u)){var v=V(u);f=P(v,t,l)}if(f.length===0){var x=V(e);f=P(x,t,l)}var E=F(f),U;try{for(E.s();!(U=E.n()).done;){var y=U.value,M=g(y,N),i=M?y:A(y),X=i===u,Z=u?.contains(i),D=i?.contains(u);if(!X&&(!Z||M)){var W=J(u,i);if(W.indexOf(l)>-1)continue;if(i&&!D){var B,_,C=document.getElementById(i?.getAttribute("data-focus")),p=C||((B=w(i))===null||B===void 0?void 0:B[0]);return(_=S(i))===null||_===void 0||_.setAttribute("data-focus",p?.id),i?.setAttribute("data-focus",p?.id),p}}if(!M){var q;(q=S(i))===null||q===void 0||q.setAttribute("data-focus",y.id),i?.setAttribute("data-focus",y.id)}return y}}catch(tt){E.e(tt)}finally{E.f()}};var s="left",c="right",d="up",h="down",Q={4:s,21:s,37:s,214:s,205:s,218:s,5:c,22:c,39:c,213:c,206:c,217:c,29460:d,19:d,38:d,211:d,203:d,215:d,29461:h,20:h,40:h,212:h,204:h,216:h,ArrowLeft:s,ArrowRight:c,ArrowUp:d,ArrowDown:h};return m}var et=rt();export{et as l};
