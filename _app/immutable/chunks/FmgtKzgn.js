import{U as z,I as ee,aa as J,o as L,D as q,G as ne,w as re,g as U,K as ae,M as fe,O as X,P as y,z as D,C as ie,ab as le,ac as Y,n as se,ad as A,V,ae as ue,X as oe,af as te,ag as de,ah as P,ai as ve,aj as ce,ak as pe,a2 as K,al as he,Q as W,T as Z,am as G,q as ge,an as _e,ao as Ee,ap as me,R as Ae,A as xe}from"./CL2eiML2.js";function be(e,a){return a}function we(e,a,l){for(var o=[],d=a.length,r,u=a.length,h=0;h<d;h++){let m=a[h];Z(m,()=>{if(r){if(r.pending.delete(m),r.done.add(m),r.pending.size===0){var t=e.outrogroups;B(P(r.done)),t.delete(r),t.size===0&&(e.outrogroups=null)}}else u-=1},!1)}if(u===0){var s=o.length===0&&l!==null;if(s){var v=l,f=v.parentNode;me(f),f.append(v),e.items.clear()}B(a,!s)}else r={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(r)}function B(e,a=!0){for(var l=0;l<e.length;l++)Ae(e[l],a)}var Q;function ke(e,a,l,o,d,r=null){var u=e,h=new Map,s=(a&J)!==0;if(s){var v=e;u=L?q(ne(v)):v.appendChild(z())}L&&re();var f=null,m=te(()=>{var i=l();return de(i)?i:i==null?[]:P(i)}),t,p=!0;function w(){n.fallback=f,Ie(n,t,u,a,o),f!==null&&(t.length===0?(f.f&A)===0?W(f):(f.f^=A,M(f,null,u)):Z(f,()=>{f=null}))}var C=ee(()=>{t=U(m);var i=t.length;let S=!1;if(L){var N=ae(u)===fe;N!==(i===0)&&(u=X(),q(u),y(!1),S=!0)}for(var _=new Set,I=se,b=oe(),g=0;g<i;g+=1){L&&D.nodeType===ie&&D.data===le&&(u=D,S=!0,y(!1));var T=t[g],k=o(T,g),c=p?null:h.get(k);c?(c.v&&Y(c.v,T),c.i&&Y(c.i,g),b&&I.unskip_effect(c.e)):(c=Te(h,p?u:Q??=z(),T,k,g,d,a,l),p||(c.e.f|=A),h.set(k,c)),_.add(k)}if(i===0&&r&&!f&&(p?f=V(()=>r(u)):(f=V(()=>r(Q??=z())),f.f|=A)),i>_.size&&ue(),L&&i>0&&q(X()),!p)if(b){for(const[$,j]of h)_.has($)||I.skip_effect(j.e);I.oncommit(w),I.ondiscard(()=>{})}else w();S&&y(!0),U(m)}),n={effect:C,items:h,outrogroups:null,fallback:f};p=!1,L&&(u=D)}function R(e){for(;e!==null&&(e.f&_e)===0;)e=e.next;return e}function Ie(e,a,l,o,d){var r=(o&Ee)!==0,u=a.length,h=e.items,s=R(e.effect.first),v,f=null,m,t=[],p=[],w,C,n,i;if(r)for(i=0;i<u;i+=1)w=a[i],C=d(w,i),n=h.get(C).e,(n.f&A)===0&&(n.nodes?.a?.measure(),(m??=new Set).add(n));for(i=0;i<u;i+=1){if(w=a[i],C=d(w,i),n=h.get(C).e,e.outrogroups!==null)for(const c of e.outrogroups)c.pending.delete(n),c.done.delete(n);if((n.f&A)!==0)if(n.f^=A,n===s)M(n,null,l);else{var S=f?f.next:s;n===e.effect.last&&(e.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),x(e,f,n),x(e,n,S),M(n,S,l),f=n,t=[],p=[],s=R(f.next);continue}if((n.f&G)!==0&&(W(n),r&&(n.nodes?.a?.unfix(),(m??=new Set).delete(n))),n!==s){if(v!==void 0&&v.has(n)){if(t.length<p.length){var N=p[0],_;f=N.prev;var I=t[0],b=t[t.length-1];for(_=0;_<t.length;_+=1)M(t[_],N,l);for(_=0;_<p.length;_+=1)v.delete(p[_]);x(e,I.prev,b.next),x(e,f,I),x(e,b,N),s=N,f=b,i-=1,t=[],p=[]}else v.delete(n),M(n,s,l),x(e,n.prev,n.next),x(e,n,f===null?e.effect.first:f.next),x(e,f,n),f=n;continue}for(t=[],p=[];s!==null&&s!==n;)(v??=new Set).add(s),p.push(s),s=R(s.next);if(s===null)continue}(n.f&A)===0&&t.push(n),f=n,s=R(n.next)}if(e.outrogroups!==null){for(const c of e.outrogroups)c.pending.size===0&&(B(P(c.done)),e.outrogroups?.delete(c));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||v!==void 0){var g=[];if(v!==void 0)for(n of v)(n.f&G)===0&&g.push(n);for(;s!==null;)(s.f&G)===0&&s!==e.fallback&&g.push(s),s=R(s.next);var T=g.length;if(T>0){var k=(o&J)!==0&&u===0?l:null;if(r){for(i=0;i<T;i+=1)g[i].nodes?.a?.measure();for(i=0;i<T;i+=1)g[i].nodes?.a?.fix()}we(e,g,k)}}r&&ge(()=>{if(m!==void 0)for(n of m)n.nodes?.a?.apply()})}function Te(e,a,l,o,d,r,u,h){var s=(u&ve)!==0?(u&ce)===0?pe(l,!1,!1):K(l):null,v=(u&he)!==0?K(d):null;return{v:s,i:v,e:V(()=>(r(a,s??l,v??d,h),()=>{e.delete(o)}))}}function M(e,a,l){if(e.nodes)for(var o=e.nodes.start,d=e.nodes.end,r=a&&(a.f&A)===0?a.nodes.start:l;o!==null;){var u=xe(o);if(r.before(o),o===d)return;o=u}}function x(e,a,l){a===null?e.effect.first=l:a.next=l,l===null?e.effect.last=a:l.prev=a}let H=[],O=[];function Ce(e){H=H.filter(a=>a!==e)}function Le(e){return H.push(e),()=>Ce(e)}function Se(e){O=O.filter(a=>a!==e)}function Re(e){return O.push(e),()=>Se(e)}function E(e){H.forEach(a=>a(e))}function F(e){O.forEach(a=>a(e))}function Me(){window.addEventListener("keydown",l=>{});let e={},a=()=>{var l=navigator.getGamepads();for(let o of l)o?.buttons&&(o.axes.forEach((d,r)=>{r==0&&F({axis:"lx",value:d}),r==1&&F({axis:"ly",value:d}),r==2&&F({axis:"rx",value:d}),r==3&&F({axis:"ry",value:d})}),o.buttons.forEach((d,r)=>{d.pressed?e[r]||(console.log("Pressed: "+r),r==8&&E("cancel"),r==1&&E("confirm"),r==3&&E("delete"),r==4&&E("l1"),r==5&&E("r1"),r==6&&E("l2"),r==7&&E("r2"),r==10&&E("l3"),r==12&&E("up"),r==13&&E("down"),r==14&&E("left"),r==15&&E("right"),e[r]=!0):e[r]=!1}));requestAnimationFrame(a)};requestAnimationFrame(a)}export{Le as a,Re as b,Me as c,ke as e,be as i};
