import{c as u,a as l,f as q}from"../chunks/DIR7eVQe.js";import{p as L,u as V,f as v,a as j,g as o,b as N,c as _,r as g,s as z,t as A}from"../chunks/D_Cuz1bJ.js";import{d as B,s as C,a as E}from"../chunks/BeZidqd5.js";import{i as F}from"../chunks/DYvsD36j.js";import{a as G,e as H,b as t,i as J}from"../chunks/CmI8zZEX.js";import{h as S}from"../chunks/CwR-t-G6.js";import{s as K}from"../chunks/YKDdez37.js";import{s as O}from"../chunks/CS1N6Kc4.js";import{t as a}from"../chunks/C-NbWmbW.js";import{g as I}from"../chunks/DO2T7REv.js";var P=q('<div class="card card-m"><div><div class="card-title text-2xl"> </div> <!></div></div>');function ot(x,T){L(T,!0);let p=N(()=>{let e=(a.topicsDb?.children||[]).find(s=>s.title===t.selectedTopic);return e?!a.notes||a.notes.length<=0?[]:e.children.map(s=>a.notes[s.noteId]):[]});function h(r){t.selectedNoteName=r.title,t.selectedNoteId=r.noteId,I("/note")}let m=N(()=>o(p)[t.cursorState["topic_"+t.selectedTopic]||0]);V(()=>G(r=>{r=="up"?(t.cursorState["topic_"+t.selectedTopic]=Math.max((t.cursorState["topic_"+t.selectedTopic]||0)-1,0),console.log("cursorState",t.cursorState["topic_"+t.selectedTopic])):r=="down"?t.cursorState["topic_"+t.selectedTopic]=Math.min((t.cursorState["topic_"+t.selectedTopic]||0)+1,o(p).length-1):r=="confirm"?h(o(m)):r=="cancel"&&I("/");const e=document.querySelector("#note_"+o(m).noteId);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}));var b=u(),k=v(b);H(k,17,()=>o(p),J,(r,e)=>{var s=P(),d=_(s),n=_(d),y=_(n,!0);g(n);var w=z(n,2);{var D=i=>{var c=u(),f=v(c);S(f,()=>a.updatedNotes[o(e).noteId].content),l(i,c)},M=i=>{var c=u(),f=v(c);S(f,()=>o(e).content),l(i,c)};F(w,i=>{a&&a.updatedNotes&&a.updatedNotes[o(e).noteId]?i(D):i(M,!1)})}g(d),g(s),A(()=>{K(d,"id","note_"+o(e).noteId),O(d,1,"card-body "+(o(m)==o(e)?"bg-secondary text-secondary-content":"")),C(y,o(e).title)}),E("click",n,()=>{h(o(e))}),l(r,s)}),l(x,b),j()}B(["click"]);export{ot as component};
